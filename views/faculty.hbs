<!DOCTYPE html>

<html>
	<head>
				
		<link href="https://fonts.googleapis.com/css?family=Oswald|Source+Sans+Pro&display=swap" rel="stylesheet">
	
		<title>DLSU Profs to Pick</title>
		
		<link rel="stylesheet" href="../css/styleMP2.css">
		
		<script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script>
		
	</head>
	
	<body>
		{{> navBar}}
		
		<div id="content">
			<div id="info">
				<div id="picture">
					<img src="../images/{{dpPath}}" width="150" height="150">
				</div>
				
				<div id="details">
					<div class="detailDiv">
						<p class="label">Name: </p><p>{{name}}</p>
					</div>
					<div class="detailDiv">
						<p class="label">Email: </p><p>{{email}}</p>
					</div>
					<div class="detailDiv">
						<p class="label">College: </p><p>{{college}}</p>
					</div>
					<div class="detailDiv">
						<p class="label">Department: </p><p>{{department}}</p>
					</div>
					<div class="detailDiv">
						<p class="label">Overall Rating: </p><p>✯{{oaRating}}</p>
					</div>
					{{#each subjects}}
						<div class="detailDiv">
							<p class="label">{{subject}} Rating: </p><p>✯{{rating}}</p>
						</div>
					{{/each}}
				</div>
			</div>
			
			<div id="reviews">
				<form>
					<textarea id="review" placeholder="Write your review here..." required></textarea>
					<input type="text" id="course" maxlength="10" placeholder="Course code" size="10" required>
					<input type="number" id="stars" min="0" max="5" step="0.5" required>
					<input type="button" id="submit" value="Submit">
				</form>
				
				<div id="reviewBox">
					
					{{#each revEntries}}
						<div class="revEntry">
							<div class="revAbt">
								<img src="../images/{{imagePath}}" class="dpIcon" width="40" height="40">
								<p class="reviewer"><a href="/user/{{reviewer}}">{{reviewer}}</a></p>
								<p ondblclick="delete()" class="buttonX">X</p>
							</div>
							
							<div class="revAbt">
								<p class="reviewee">{{reviewee}}</p>
								<p class="revTag">{{revCourse}} ✯{{revStar}}</p>
							</div>
							
							<p class="revDet">{{revDet}}</p>
						</div>
					{{/each}}
					
				</div>
			</div>
		</div>
		
		<script type="text/javascript">
			$("#submits").click(function() {
				$("#reviewBox").append(	"<div class='revEntry'>" +
											"<div class='revAbt'>" +
												"<img src='../images/{{imagePath}}' class='dpIcon' width='40' height='40'>" +
												"<p class='reviewer'><a href='/user/{{reviewer}}'>{{reviewer}}</a></p>" +
												"<p ondblclick='delete()' class='buttonX'>X</p>" +
											"</div>" +
											
											"<div class='revAbt'>" +
												"<p class='reviewee'>{{reviewee}}</p>" +
												"<p class='revTag'>" + $("#course").val() + " ✯" + $("#stars").val() + "</p>" +
											"</div>" +
											
											"<p class='revDet'>" + $("#review").val() + "</p>" +
										"</div>");
			});
			
			$('#reviewBox').on('dblclick', '.revEntry', function() {
				$(this).remove();
			});
			
			function submit(){
				window.location = "/result";
			};
			
			$("[type='number']").keypress(function (evt) {
				evt.preventDefault();
			});
		</script>
	</body>
</html>